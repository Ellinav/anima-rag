diff --git a/node_modules/vectra/lib/ItemSelector.js b/node_modules/vectra/lib/ItemSelector.js
index 6714c4b..43890bf 100644
--- a/node_modules/vectra/lib/ItemSelector.js
+++ b/node_modules/vectra/lib/ItemSelector.js
@@ -136,7 +136,14 @@ class ItemSelector {
                     }
                     break;
                 case '$in':
-                    if (typeof value == 'boolean') {
+                    // [修复] 处理 value 是数组的情况 (例如 tags: ["Important", "Comedy"])
+                    if (Array.isArray(value)) {
+                        // 如果 metadata 里的 tags 数组与过滤数组没有任何交集，则返回 false
+                        if (!value.some(item => filter[key].includes(item))) {
+                            return false;
+                        }
+                    }
+                    else if (typeof value == 'boolean') {
                         return false;
                     }
                     else if (typeof value == 'string' && !filter[key].includes(value)) {
@@ -147,7 +154,14 @@ class ItemSelector {
                     }
                     break;
                 case '$nin':
-                    if (typeof value == 'boolean') {
+                    // [修复] 处理 value 是数组的情况 (排除 tags)
+                    if (Array.isArray(value)) {
+                        // 如果 metadata 里的 tags 数组只要有任何一个存在于过滤数组中，则排除，返回 false
+                        if (value.some(item => filter[key].includes(item))) {
+                            return false;
+                        }
+                    }
+                    else if (typeof value == 'boolean') {
                         return false;
                     }
                     else if (typeof value == 'string' && filter[key].includes(value)) {
